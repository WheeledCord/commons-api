{
  "http_requests": {
    "register": {
      "method": "POST",
      "url": "/api/register",
      "headers": {
        "Content-Type": "application/json"
      },
      "body": {
        "username": "alice",
        "password": "secure123"
      },
      "response": {
        "user": {
          "id": 1,
          "username": "alice",
          "created_at": "2025-01-17T10:00:00Z",
          "last_seen": "2025-01-17T10:00:00Z"
        },
        "token": "a1b2c3d4e5f6..."
      }
    },
    "login": {
      "method": "POST", 
      "url": "/api/login",
      "headers": {
        "Content-Type": "application/json"
      },
      "body": {
        "username": "alice",
        "password": "secure123"
      },
      "response": {
        "user": {
          "id": 1,
          "username": "alice", 
          "created_at": "2025-01-17T10:00:00Z",
          "last_seen": "2025-01-17T10:00:15Z"
        },
        "token": "a1b2c3d4e5f6..."
      }
    },
    "create_hall": {
      "method": "POST",
      "url": "/api/halls/create",
      "headers": {
        "Content-Type": "application/json",
        "Authorization": "Bearer a1b2c3d4e5f6..."
      },
      "body": {
        "name": "My Cool Hall"
      },
      "response": {
        "hall": {
          "id": 1,
          "name": "My Cool Hall",
          "invite_code": "abc123def456",
          "owner_id": 1,
          "created_at": "2025-01-17T10:05:00Z"
        }
      }
    },
    "join_hall": {
      "method": "POST",
      "url": "/api/halls/join", 
      "headers": {
        "Content-Type": "application/json",
        "Authorization": "Bearer xyz789..."
      },
      "body": {
        "invite_code": "abc123def456"
      },
      "response": {
        "hall": {
          "id": 1,
          "name": "My Cool Hall",
          "invite_code": "abc123def456", 
          "owner_id": 1,
          "created_at": "2025-01-17T10:05:00Z"
        }
      }
    },
    "get_halls": {
      "method": "GET",
      "url": "/api/halls",
      "headers": {
        "Authorization": "Bearer a1b2c3d4e5f6..."
      },
      "response": {
        "halls": [
          {
            "id": 1,
            "name": "My Cool Hall",
            "invite_code": "abc123def456",
            "owner_id": 1,
            "created_at": "2025-01-17T10:05:00Z"
          }
        ]
      }
    },
    "get_rooms": {
      "method": "GET",
      "url": "/api/rooms/1",
      "headers": {
        "Authorization": "Bearer a1b2c3d4e5f6..."
      },
      "response": {
        "rooms": [
          {
            "id": 1,
            "hall_id": 1,
            "name": "general",
            "created_at": "2025-01-17T10:05:01Z"
          }
        ]
      }
    },
    "create_room": {
      "method": "POST",
      "url": "/api/rooms/create",
      "headers": {
        "Content-Type": "application/json",
        "Authorization": "Bearer a1b2c3d4e5f6..."
      },
      "body": {
        "hall_id": 1,
        "name": "random"
      },
      "response": {
        "room": {
          "id": 2,
          "hall_id": 1,
          "name": "random",
          "created_at": "2025-01-17T10:10:00Z"
        }
      }
    },
    "get_messages": {
      "method": "GET", 
      "url": "/api/messages/1?limit=20",
      "headers": {
        "Authorization": "Bearer a1b2c3d4e5f6..."
      },
      "response": {
        "messages": [
          {
            "id": 1,
            "room_id": 1,
            "user_id": 1,
            "username": "alice",
            "content": "Hello everyone!",
            "created_at": "2025-01-17T10:15:00Z"
          }
        ]
      }
    }
  },
  "websocket_messages": {
    "join_room": {
      "description": "Subscribe to a room to receive messages",
      "client_sends": {
        "type": "join_room",
        "data": {
          "hall_id": 1,
          "room_id": 1
        }
      }
    },
    "leave_room": {
      "description": "Unsubscribe from a room",
      "client_sends": {
        "type": "leave_room",
        "data": {
          "room_id": 1
        }
      }
    },
    "send_message": {
      "description": "Send a message to a room",
      "client_sends": {
        "type": "send_message",
        "data": {
          "room_id": 1,
          "content": "Hello everyone!"
        }
      }
    },
    "new_message": {
      "description": "Broadcast message received by all room subscribers",
      "server_sends": {
        "type": "new_message",
        "data": {
          "message": {
            "id": 1,
            "room_id": 1,
            "user_id": 1,
            "username": "alice",
            "content": "Hello everyone!",
            "created_at": "2025-01-17T10:15:00Z"
          },
          "room_id": 1
        }
      }
    },
    "ping": {
      "description": "Heartbeat to maintain presence",
      "client_sends": {
        "type": "ping",
        "data": {}
      }
    }
  },
  "usage_example": {
    "description": "Complete flow example",
    "steps": [
      "1. Register: POST /api/register with username/password",
      "2. Login: POST /api/login with username/password, get token",
      "3. Create hall: POST /api/halls/create with name",
      "4. Get rooms: GET /api/rooms/{hall_id}",
      "5. Connect WebSocket: ws://localhost:8080/ws?token={token}",
      "6. Join room: Send {type: 'join_room', data: {hall_id: 1, room_id: 1}}",
      "7. Send message: Send {type: 'send_message', data: {room_id: 1, content: 'Hello!'}}",
      "8. Receive broadcasts: Listen for {type: 'new_message', ...}"
    ]
  }
}
